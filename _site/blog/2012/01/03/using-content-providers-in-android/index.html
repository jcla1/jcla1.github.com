<!DOCTYPE html>
<!--[if lt IE 7]> <html class="lt-ie9 lt-ie8 lt-ie7" lang="en"> <![endif]-->
<!--[if IE 7]>    <html class="lt-ie9 lt-ie8" lang="en"> <![endif]-->
<!--[if IE 8]>    <html class="lt-ie9" lang="en"> <![endif]-->
<!--[if gt IE 8]><!--> <html lang="en"> <!--<![endif]-->
<html lang="en">
<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
	<meta http-equiv="Content-Type" content="text/html">
  <meta name="google-site-verification" content="xLdL56j0SwgMQ_zaX9jYVsRdm4THscM3NFAYIRhuVdg" />
  <link href="http://jcla1.com/rss.xml" rel="alternate" title="jcla1.com" type="application/atom+xml" />

	
  <title>Using content providers in Android</title>
	<meta name="description" content="A blog about tech.">
  <meta name="author" content="Joseph Adams">

  <link rel="stylesheet" href="/css/main.css" type="text/css" media="screen, projection" />
	
</head>
<body>

<div class="site">
  <div class="title">
    <a href="/">Joseph Adams</a>
    <a class="extra" href="/">home</a>
    <a class="extra" href="/about/">about</a>
    <!--a class="extra" href="/about/">about</a-->
  </div>
  
  <div id="post">
<h1 id='using_content_providers_in_android'>Using content providers in Android</h1>

<p class='meta'> 03 Jan 2012 - Krefeld, Germany</p>

<p>In this blog post I&#8217;ll show you how to get data stored on an Android phone using content providers. We&#8217;ll write an app that fetches all the bookmarks and history from the phone&#8217;s browser.</p>

<p>Most Data in Android is exposed through so called &#8220;Content Providers&#8221;. The person who wrote a specific part of Android (i.e. the browser, but surely it wasn&#8217;t just one person), could decide how to implement the storage. If he used SQLite or just a basic file or json, etc. It didn&#8217;t matter because Google decided to let their developers implement these content providers so that there would be a standard way for developers like us, to access the data.</p>

<p>In Android all the content providers are stored in the package: <code>android.provider.*;</code> They are queried using their URIs and Cursors. Specifically the Browser&#8217;s Bookmark and History content provider URI is in: <code>android.provider.Browser.BOOKMARKS_URI;</code> (The name is a bit misleading, since it is the URI for <i>BOTH</i> Bookmarks and History.) To retrieve data you need to find the names of the columns you want to retrieve and put them in an Array. You can find the package that contains the column definition for the bookmarks and history <a href='http://developer.android.com/reference/android/provider/Browser.BookmarkColumns.html'>here</a>. <p>So let's get started!</p> Let&#8217;s first set up all the variables:</p>
<script src='https://gist.github.com/1554163.js?file=variables.java'>
</script>
<p>Now that we have the basic variables we can write the cursor. The function that creates it takes a lot of arguments. As you can see not many of these are important for us:</p>
<script src='https://gist.github.com/1554163.js?file=cursor.java'>
</script>
<p>Next we&#8217;ll make a new onClick listener for the button. This listener basically loops through all the data rows and does something with them:</p>
<script src='https://gist.github.com/1554163.js?file=onclicklistener.java'>
</script>
<p>Now you have a list containing the bookmarks and history of a phones browser and you could for example send the urls to a server.</p>
<p>You can download the whole Activity <a href='https://raw.github.com/gist/1554163/7a0b4101462d4e0685289e6c0920b7e5c8d490a7/activity.java'>here</a></p>
<div id="related">
  <h2>Related Posts</h2>
  <ul class="posts">
    
      <li><span>11 Mar 2012</span> &raquo; <a href="/blog/2012/03/11/web-audio-api-overview-part1">Web Audio API overview (Part 1 of 2)</a></li>
    
      <li><span>08 Jan 2012</span> &raquo; <a href="/blog/2012/01/08/exploring-the-v8-js-engine-part-2">Exploring the V8 JS engine (Part 2 of 2)</a></li>
    
      <li><span>07 Jan 2012</span> &raquo; <a href="/blog/2012/01/07/exploring-the-v8-js-engine-part-1">Exploring the V8 JS engine (Part 1 of 2)</a></li>
    
  </ul>
</div>
  
  <div class="footer">
    <div class="contact">
      <p>
        Joseph Adams<br />
        <a href="mailto:whitegolem@gmail.com">whitegolem@gmail.com</a><br />
        <a href="http://jcla1.com">jcla1.com</a>
      </p>
    </div>
    <div class="contact">
      <p>
        <a href="http://github.com/jcla1/"><img src="/img/github_32.png"></img></a>
        <a href="http://twitter.com/jcla1/"><img src="/img/twitter_32.png"></img></a>
        <a href="https://plus.google.com/109982208260057168917/posts"><img src="/img/google_32.png"></a>
      </p>
    </div>
    <div class="rss">
      <a href="http://jcla1.com/rss.xml">
        <img src="/img/rss_32.png" alt="Subscribe to RSS Feed" />
      </a>
    </div>
  </div>
</div>

<script>
    var _gaq=[['_setAccount','UA-12395541-8'],['_trackPageview']];
    (function(d,t){var g=d.createElement(t),s=d.getElementsByTagName(t)[0];
    g.src=('https:'==location.protocol?'//ssl':'//www')+'.google-analytics.com/ga.js';
    s.parentNode.insertBefore(g,s)}(document,'script'));
</script>

</body>
</html>
